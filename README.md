# üì¶ FileExchanger

Backend-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ (streaming),
–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π –∏ —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏ —Ñ–∞–π–ª–æ–≤.

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **FastAPI** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **async SQLAlchemy** –∏ **S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ **500 MB**
- üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ **HTTP streaming**
- ‚è≥ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏ —Ñ–∞–π–ª–æ–≤
- üî¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π
- ‚òÅÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ S3 (AWS / MinIO / S3-compatible)
- üß± –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (routers / services / repositories)

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

FastAPI (HTTP)  
‚Üì  
FileService (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)  
‚Üì  
FileRepository (PostgreSQL),
S3Repository (S3 storage)


- –§–∞–π–ª—ã –æ—Ç–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `StreamingResponse`
- –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º –≤ –ø–∞–º—è—Ç—å
- –ß—Ç–µ–Ω–∏–µ –∏–∑ S3 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —á–∞–Ω–∫–∞–º (1 MB)

---

## üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Python 3.11+
- FastAPI
- SQLAlchemy (async)
- PostgreSQL
- aioboto3
- Pydantic v2
- Poetry

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

‚îú‚îÄ‚îÄ core/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è  

‚îú‚îÄ‚îÄ db/  
‚îÇ ‚îú‚îÄ‚îÄ models/ # ORM –º–æ–¥–µ–ª–∏  
‚îÇ ‚îî‚îÄ‚îÄ db.py # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î  
‚îú‚îÄ‚îÄ repositories/ # –†–∞–±–æ—Ç–∞ —Å –ë–î –∏ S3  
‚îú‚îÄ‚îÄ services/ # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞  
‚îú‚îÄ‚îÄ routers/ # FastAPI —Ä–æ—É—Ç–µ—Ä—ã  
‚îú‚îÄ‚îÄ main.py # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞  
‚îú‚îÄ‚îÄ pyproject.toml  
‚îú‚îÄ‚îÄ README.md  
‚îî‚îÄ‚îÄ .env.example  

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.env` —Ñ–∞–π–ª –∏ `pydantic-settings`.

### –ü—Ä–∏–º–µ—Ä `.env`

```env
DB__USERNAME=postgres
DB__PASSWORD=postgres
DB__NAME=fileexchanger
DB__HOST=localhost
DB__PORT=5432

S3__ENDPOINT_URL=http://localhost:9000
S3__PUBLIC_URL=http://localhost:9000
S3__ACCESS_KEY=minioadmin
S3__SECRET_KEY=minioadmin
S3__ACCOUNT_ID=local
S3__BUCKET_NAME=files
S3__REGION=auto
```
---

### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ **—á–µ—Ä–µ–∑ Docker**.  
–î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É—é—Ç—Å—è –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã **PostgreSQL** –∏ **S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (MinIO)**.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker
- Docker Compose

–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```shell
docker-compose up --build
```